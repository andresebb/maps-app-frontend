[{"C:\\Users\\aebb0\\Documents\\platzi-cursos\\udemy\\mapsApp\\maps-frontend\\src\\index.js":"1","C:\\Users\\aebb0\\Documents\\platzi-cursos\\udemy\\mapsApp\\maps-frontend\\src\\MapApp.js":"2","C:\\Users\\aebb0\\Documents\\platzi-cursos\\udemy\\mapsApp\\maps-frontend\\src\\pages\\MapaPage.js":"3","C:\\Users\\aebb0\\Documents\\platzi-cursos\\udemy\\mapsApp\\maps-frontend\\src\\hooks\\useMapbox.js":"4"},{"size":177,"mtime":1608043298295,"results":"5","hashOfConfig":"6"},{"size":185,"mtime":1608044105487,"results":"7","hashOfConfig":"6"},{"size":465,"mtime":1608050930316,"results":"8","hashOfConfig":"6"},{"size":2066,"mtime":1608060918142,"results":"9","hashOfConfig":"6"},{"filePath":"10","messages":"11","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"12"},"49igco",{"filePath":"13","messages":"14","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"12"},{"filePath":"15","messages":"16","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"12"},{"filePath":"17","messages":"18","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"19"},"C:\\Users\\aebb0\\Documents\\platzi-cursos\\udemy\\mapsApp\\maps-frontend\\src\\index.js",[],["20","21"],"C:\\Users\\aebb0\\Documents\\platzi-cursos\\udemy\\mapsApp\\maps-frontend\\src\\MapApp.js",[],"C:\\Users\\aebb0\\Documents\\platzi-cursos\\udemy\\mapsApp\\maps-frontend\\src\\pages\\MapaPage.js",[],"C:\\Users\\aebb0\\Documents\\platzi-cursos\\udemy\\mapsApp\\maps-frontend\\src\\hooks\\useMapbox.js",["22","23"],"import { useState, useRef, useEffect, useCallback } from \"react\";\r\nimport mapboxgl from \"mapbox-gl\";\r\nimport { v4 } from \"uuid\";\r\n\r\nmapboxgl.accessToken =\r\n  \"pk.eyJ1IjoiY2hpZ3VpcmVjb2RlIiwiYSI6ImNraXEyazBjNTBhYzUyc2xyb2kweno1eGcifQ.j8cpfzTNCCIdcDRXl5xz9w\";\r\n\r\nexport const useMapbox = (puntoInicial) => {\r\n  //Referencia al div del map, setRef es lo mismo que mapaDiv solo que memorizado\r\n  const mapaDiv = useRef();\r\n  const setRef = useCallback((node) => {\r\n    mapaDiv.current = node;\r\n  }, []);\r\n\r\n  // Referencia a los marcadores\r\n  const marcadores = useRef({});\r\n\r\n  //Mapa y cordenadas\r\n  const mapa = useRef();\r\n  const [cordenadas, setCordenadas] = useState(puntoInicial);\r\n\r\n  //Agregar marcadores\r\n  const agregarMarcador = useCallback((ev) => {\r\n    const { lng, lat } = ev.lngLat;\r\n\r\n    const marker = new mapboxgl.Marker();\r\n    marker.id = v4();\r\n\r\n    marker.setLngLat([lng, lat]).addTo(mapa.current).setDraggable(true);\r\n\r\n    marcadores.current[marker.id] = marker;\r\n  }, []);\r\n\r\n  // Cargamos el mapa\r\n  useEffect(() => {\r\n    const map = new mapboxgl.Map({\r\n      container: mapaDiv.current,\r\n      style: \"mapbox://styles/mapbox/streets-v11\",\r\n      center: [puntoInicial.lng, puntoInicial.lat],\r\n      zoom: puntoInicial.zoom,\r\n    });\r\n\r\n    map.addControl(new mapboxgl.NavigationControl());\r\n\r\n    var marker = new mapboxgl.Marker()\r\n      .setLngLat([cordenadas.lng, cordenadas.lat])\r\n      .addTo(map)\r\n      .setDraggable(true);\r\n\r\n    mapa.current = map;\r\n  }, [puntoInicial]);\r\n\r\n  // Cuando se mueve el mapa\r\n  useEffect(() => {\r\n    mapa.current?.on(\"move\", () => {\r\n      const { lng, lat } = mapa.current.getCenter();\r\n      setCordenadas({\r\n        lng: lng.toFixed(4),\r\n        lat: lat.toFixed(4),\r\n        zoom: mapa.current.getZoom().toFixed(2),\r\n      });\r\n    });\r\n  }, []);\r\n\r\n  // Crear nuevo marcador\r\n  useEffect(() => {\r\n    mapa.current?.on(\"click\", (ev) => {\r\n      agregarMarcador(ev);\r\n    });\r\n  }, [agregarMarcador]);\r\n\r\n  return {\r\n    cordenadas,\r\n    agregarMarcador,\r\n    marcadores,\r\n    setRef,\r\n  };\r\n};\r\n",{"ruleId":"24","replacedBy":"25"},{"ruleId":"26","replacedBy":"27"},{"ruleId":"28","severity":1,"message":"29","line":45,"column":9,"nodeType":"30","messageId":"31","endLine":45,"endColumn":15},{"ruleId":"32","severity":1,"message":"33","line":51,"column":6,"nodeType":"34","endLine":51,"endColumn":20,"suggestions":"35"},"no-native-reassign",["36"],"no-negated-in-lhs",["37"],"no-unused-vars","'marker' is assigned a value but never used.","Identifier","unusedVar","react-hooks/exhaustive-deps","React Hook useEffect has missing dependencies: 'cordenadas.lat' and 'cordenadas.lng'. Either include them or remove the dependency array.","ArrayExpression",["38"],"no-global-assign","no-unsafe-negation",{"desc":"39","fix":"40"},"Update the dependencies array to be: [cordenadas.lat, cordenadas.lng, puntoInicial]",{"range":"41","text":"42"},[1492,1506],"[cordenadas.lat, cordenadas.lng, puntoInicial]"]