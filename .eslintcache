[{"C:\\Users\\aebb0\\Documents\\platzi-cursos\\udemy\\mapsApp\\maps-frontend\\src\\index.js":"1","C:\\Users\\aebb0\\Documents\\platzi-cursos\\udemy\\mapsApp\\maps-frontend\\src\\MapApp.js":"2","C:\\Users\\aebb0\\Documents\\platzi-cursos\\udemy\\mapsApp\\maps-frontend\\src\\pages\\MapaPage.js":"3","C:\\Users\\aebb0\\Documents\\platzi-cursos\\udemy\\mapsApp\\maps-frontend\\src\\hooks\\useMapbox.js":"4","C:\\Users\\aebb0\\Documents\\platzi-cursos\\udemy\\mapsApp\\maps-frontend\\src\\context\\SocketContext.js":"5","C:\\Users\\aebb0\\Documents\\platzi-cursos\\udemy\\mapsApp\\maps-frontend\\src\\hooks\\useSocket.js":"6"},{"size":177,"mtime":1608043298295,"results":"7","hashOfConfig":"8"},{"size":295,"mtime":1608128812440,"results":"9","hashOfConfig":"8"},{"size":1281,"mtime":1608132640261,"results":"10","hashOfConfig":"8"},{"size":2768,"mtime":1608063949394,"results":"11","hashOfConfig":"8"},{"size":415,"mtime":1608128569991,"results":"12","hashOfConfig":"8"},{"size":610,"mtime":1608128587955,"results":"13","hashOfConfig":"8"},{"filePath":"14","messages":"15","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"16"},"49igco",{"filePath":"17","messages":"18","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"19","messages":"20","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"21","messages":"22","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"23","usedDeprecatedRules":"16"},{"filePath":"24","messages":"25","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"16"},{"filePath":"26","messages":"27","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"16"},"C:\\Users\\aebb0\\Documents\\platzi-cursos\\udemy\\mapsApp\\maps-frontend\\src\\index.js",[],["28","29"],"C:\\Users\\aebb0\\Documents\\platzi-cursos\\udemy\\mapsApp\\maps-frontend\\src\\MapApp.js",[],"C:\\Users\\aebb0\\Documents\\platzi-cursos\\udemy\\mapsApp\\maps-frontend\\src\\pages\\MapaPage.js",["30","31","32"],"C:\\Users\\aebb0\\Documents\\platzi-cursos\\udemy\\mapsApp\\maps-frontend\\src\\hooks\\useMapbox.js",["33","34"],"import { useState, useRef, useEffect, useCallback } from \"react\";\r\nimport mapboxgl from \"mapbox-gl\";\r\nimport { v4 } from \"uuid\";\r\nimport { Subject } from \"rxjs\";\r\n\r\nmapboxgl.accessToken =\r\n  \"pk.eyJ1IjoiY2hpZ3VpcmVjb2RlIiwiYSI6ImNraXEyazBjNTBhYzUyc2xyb2kweno1eGcifQ.j8cpfzTNCCIdcDRXl5xz9w\";\r\n\r\nexport const useMapbox = (puntoInicial) => {\r\n  //Referencia al div del map, setRef es lo mismo que mapaDiv solo que memorizado\r\n  const mapaDiv = useRef();\r\n  const setRef = useCallback((node) => {\r\n    mapaDiv.current = node;\r\n  }, []);\r\n\r\n  // Referencia a los marcadores\r\n  const marcadores = useRef({});\r\n\r\n  //Observables de Rxjs\r\n  const movimientoMarcador = useRef(new Subject());\r\n  const nuevoMarcador = useRef(new Subject());\r\n\r\n  //Mapa y cordenadas\r\n  const mapa = useRef();\r\n  const [cordenadas, setCordenadas] = useState(puntoInicial);\r\n\r\n  //Agregar marcadores\r\n  const agregarMarcador = useCallback((ev) => {\r\n    const { lng, lat } = ev.lngLat;\r\n\r\n    const marker = new mapboxgl.Marker();\r\n    marker.id = v4();\r\n    marker.setLngLat([lng, lat]).addTo(mapa.current).setDraggable(true);\r\n\r\n    //Asignamoes el objeto al marcador\r\n    marcadores.current[marker.id] = marker;\r\n\r\n    //Si el marcador tiene id no emitir\r\n    nuevoMarcador.current.next({\r\n      id: marker.id,\r\n      lng,\r\n      lat,\r\n    });\r\n\r\n    //Escuchar movimientos al marcador\r\n    marker.on(\"drag\", (ev) => {\r\n      const { id } = ev.target;\r\n      const { lng, lat } = ev.target.getLngLat();\r\n\r\n      //\r\n      movimientoMarcador.current.next({\r\n        id,\r\n        lng,\r\n        lat,\r\n      });\r\n    });\r\n  }, []);\r\n\r\n  // Cargamos el mapa\r\n  useEffect(() => {\r\n    const map = new mapboxgl.Map({\r\n      container: mapaDiv.current,\r\n      style: \"mapbox://styles/mapbox/streets-v11\",\r\n      center: [puntoInicial.lng, puntoInicial.lat],\r\n      zoom: puntoInicial.zoom,\r\n    });\r\n\r\n    map.addControl(new mapboxgl.NavigationControl());\r\n\r\n    var marker = new mapboxgl.Marker()\r\n      .setLngLat([cordenadas.lng, cordenadas.lat])\r\n      .addTo(map)\r\n      .setDraggable(true);\r\n\r\n    mapa.current = map;\r\n  }, [puntoInicial]);\r\n\r\n  // Cuando se mueve el mapa\r\n  useEffect(() => {\r\n    mapa.current?.on(\"move\", () => {\r\n      const { lng, lat } = mapa.current.getCenter();\r\n      setCordenadas({\r\n        lng: lng.toFixed(4),\r\n        lat: lat.toFixed(4),\r\n        zoom: mapa.current.getZoom().toFixed(2),\r\n      });\r\n    });\r\n  }, []);\r\n\r\n  // Crear nuevo marcador\r\n  useEffect(() => {\r\n    mapa.current?.on(\"click\", (ev) => {\r\n      agregarMarcador(ev);\r\n    });\r\n  }, [agregarMarcador]);\r\n\r\n  return {\r\n    cordenadas,\r\n    agregarMarcador,\r\n    marcadores,\r\n    setRef,\r\n    nuevoMarcador$: nuevoMarcador.current,\r\n    movimientoMarcador$: movimientoMarcador.current,\r\n  };\r\n};\r\n","C:\\Users\\aebb0\\Documents\\platzi-cursos\\udemy\\mapsApp\\maps-frontend\\src\\context\\SocketContext.js",[],"C:\\Users\\aebb0\\Documents\\platzi-cursos\\udemy\\mapsApp\\maps-frontend\\src\\hooks\\useSocket.js",[],{"ruleId":"35","replacedBy":"36"},{"ruleId":"37","replacedBy":"38"},{"ruleId":"39","severity":1,"message":"40","line":23,"column":6,"nodeType":"41","endLine":23,"endColumn":22,"suggestions":"42"},{"ruleId":"39","severity":1,"message":"40","line":35,"column":6,"nodeType":"41","endLine":35,"endColumn":8,"suggestions":"43"},{"ruleId":"39","severity":1,"message":"40","line":42,"column":6,"nodeType":"41","endLine":42,"endColumn":8,"suggestions":"44"},{"ruleId":"45","severity":1,"message":"46","line":70,"column":9,"nodeType":"47","messageId":"48","endLine":70,"endColumn":15},{"ruleId":"39","severity":1,"message":"49","line":76,"column":6,"nodeType":"41","endLine":76,"endColumn":20,"suggestions":"50"},"no-native-reassign",["51"],"no-negated-in-lhs",["52"],"react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'socket'. Either include it or remove the dependency array.","ArrayExpression",["53"],["54"],["55"],"no-unused-vars","'marker' is assigned a value but never used.","Identifier","unusedVar","React Hook useEffect has missing dependencies: 'cordenadas.lat' and 'cordenadas.lng'. Either include them or remove the dependency array.",["56"],"no-global-assign","no-unsafe-negation",{"desc":"57","fix":"58"},{"desc":"59","fix":"60"},{"desc":"59","fix":"61"},{"desc":"62","fix":"63"},"Update the dependencies array to be: [nuevoMarcador$, socket]",{"range":"64","text":"65"},"Update the dependencies array to be: [socket]",{"range":"66","text":"67"},{"range":"68","text":"67"},"Update the dependencies array to be: [cordenadas.lat, cordenadas.lng, puntoInicial]",{"range":"69","text":"70"},[589,605],"[nuevoMarcador$, socket]",[895,897],"[socket]",[1058,1060],[2096,2110],"[cordenadas.lat, cordenadas.lng, puntoInicial]"]